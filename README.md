# تگ با حساب کتاب

## نگاه کلی

پروژه "تگ با حساب کتاب" شامل یک تگ HTML سفارشی به نام `<formula>` می‌شود که به کاربران این امکان را می‌دهد تا به صورت پویا محاسبات ریاضی را در صفحات وب خود انجام دهند. این پروژه از HTML، CSS، و JavaScript استفاده می‌کند تا یک تجربه کاربری دینامیک و واکنشگرا فراهم آورد.


### روند اجرای کار

1.**متغیرها:** کاربران مقادیر مورد نیاز برای محاسبه را در فیلدهای ورودی وارد می‌کنند.

2.**فرمول‌ها:** فرمول‌های ریاضی در تگ‌های `<formula>` تعریف شده‌اند که فرمول‌های محاسباتی را تعیین می‌کنند.

3.**محاسبه و نمایش نتایج:** با تغییر مقادیر ورودی، محاسبات به صورت خودکار انجام می‌شوند و نتایج در المان‌ها نمایش داده می‌شوند.

4.**مدیریت خطاها:** در صورت وارد کردن داده‌های نامعتبر یا تعریف نشدن فرمول‌ها به درستی، پیام خطا نمایش داده می‌شود.



### نحوه استفاده

برای شروع کار با پروژه، فایل `index.html` را در مرورگر خود باز کنید. مقادیر مورد نظر خود را در فیلدهای ورودی وارد کرده و شاهد به‌روزرسانی خودکار نتایج بر اساس فرمول‌های تعریف شده باشید. از امنیت اطلاعات و تجربه کاربری لذت ببرید.
### اضافه کردن متغییر و فرمول جدید

#### اضافه کردن متغییر جدید:

**تعریف فیلد ورودی:** برای اضافه کردن یک متغییر جدید، شما باید یک فیلد ورودی جدید در بخش متغیرها ایجاد کنید. به این فیلد یک `id` منحصر به فرد اختصاص دهید تا بتواند در فرمول‌ها مورد استفاده قرار گیرد.

   ```html
   <input class="text-input" type="text" id="newVariable" placeholder="توضیح متغییر جدید" />
   ```
   
   این فیلد باید به شکل زیر در HTML شما اضافه شود:
   
   ```html
   <section class="section">
     <h2 class="title">متغیرها</h2>
     <input class="text-input" type="text" id="fee" placeholder="قیمت واحد" />
     <input class="text-input" type="text" id="count" placeholder="تعداد" />
     <input class="text-input" type="text" id="discount" placeholder="تخفیف" />
     <input class="text-input" type="text" id="newVariable" placeholder="توضیح متغییر جدید" />
   </section>
   ```

#### اضافه کردن تگ فرمول جدید:

**تعریف فرمول جدید:** برای اضافه کردن یک فرمول جدید، شما باید یک تگ `<formula>` جدید با استفاده از ویژگی `evaluator` که فرمول محاسباتی شما را تعریف می‌کند، ایجاد نمایید. مطمئن شوید که متغییرهای استفاده شده در فرمول، همان `id` هایی هستند که در فیلدهای ورودی تعریف شده‌اند.

   ```html
   <formula evaluator="newVariable * count - discount" hidden></formula>
   ```

   این تگ باید به شکل زیر در HTML شما اضافه شود:

   ```html
   <section class="section">
     <h2 class="title">فرمول‌ها</h2>
     <formula evaluator="count * fee - discount" hidden></formula>
     <formula evaluator="count + fee - discount" hidden></formula>
     <formula evaluator="count + fee + discount" hidden></formula>
     <formula evaluator="newVariable * count - discount" hidden></formula>
   </section>
   ```

### استایل و طراحی ریسپانسیو
- تمام المان‌ها به گونه‌ای طراحی شده‌اند که به خوبی با اندازه‌های متفاوت صفحه سازگار باشند.
- استفاده از `flexbox` در CSS برای چینش مناسب المان‌ها در صفحه.
- تعریف واحد‌های Relative برای اندازه‌ها تا اطمینان حاصل شود که تمامی المان‌ها نسبت به اندازه صفحه تنظیم می‌شوند.

### توابع JavaScript

#### تابع `getResultInput(resultInputId, formulaElement)`
این تابع برای یافتن یا ایجاد یک المان ورودی جدید است که برای نمایش نتیجه محاسبات مورد استفاده قرار می‌گیرد. اگر المان با `id` مشخص شده وجود نداشته باشد، یک المان جدید ایجاد کرده و آن را به DOM اضافه می‌کند. این المان در کنار المان `<formula>` قرار می‌گیرد.

#### تابع `updateResult(value, resultInput)`
این تابع مقدار `value` را در فیلد ورودی مربوط به نتیجه (`resultInput`) به‌روزرسانی می‌کند. این امر از طریق تغییر مقدار ورودی انجام می‌پذیرد، که نتیجه محاسبه را نمایش می‌دهد.

#### تابع `showInvalid(resultInput)`
این تابع برای نمایش پیام خطای "Invalid Formula" در فیلد ورودی نتیجه استفاده می‌شود، وقتی که محاسبه به دلیل فرمول نامعتبر یا خطایی در ورودی‌ها امکان‌پذیر نیست.

#### تابع `calculate(variables, formula, resultInput)`
این تابع مسئولیت مرکزی محاسبه نتایج را بر عهده دارد. ابتدا، ورودی‌ها از نظر نوع داده‌ای بررسی می‌شوند تا مطمئن شویم که همه ورودی‌ها عددی هستند. سپس، محاسبه فرمول با استفاده از مقادیر این ورودی‌ها صورت می‌گیرد. اگر فرمول با موفقیت محاسبه شود، نتیجه در المان ورودی نتیجه نمایش داده می‌شود. در این محاسبه، از تابع `eval()` استفاده می‌شود که باید با دقت کافی مدیریت شود تا امنیت کد حفظ شود.

#### تابع `formulaSectionHandler(formulaElement)`
این تابع برای هر المان `<formula>`, ورودی‌های مرتبط با فرمول را پیدا کرده و برای هر تغییر در این ورودی‌ها، محاسبه را با استفاده از تابع `calculate` اجرا می‌کند. این امر اطمینان می‌دهد که با هر تغییر ورودی‌ها، نتایج به صورت پویا به‌روزرسانی شوند.

#### تابع `DOMContentLoaded`
این گوش‌کننده رویداد پس از بارگذاری کامل DOM فعال می‌شود، تمام المان‌های `<formula>` در صفحه را شناسایی کرده و برای هر کدام از آن‌ها `formulaSectionHandler` را فرا می‌خواند. این تأمین می‌کند که همه فرمول‌ها از همان ابتدای بارگذاری صفحه فعال و قابل استفاده باشند.

این توابع به هم پیوسته و هماهنگ با یکدیگر کار می‌کنند تا تجربه کاربری سریع و دقیق در زمان وارد کردن داده‌ها و دریافت نتایج در زمان واقعی را فراهم آورند.
